<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>nh-mvp</title>
    <script type="module" src="./dist/index.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script>
      function wat(elmt) {
        alert(elmt.value);
      }
    </script>
</head>

<body>
  <section id="general-wrapper">
  <div id="app">
    <div class="container">
      <!--UPLOAD-->
      <form enctype="multipart/form-data" novalidate v-if="isInitial || isSaving">
        <h1>upload meme(z)</h1>
        <div class="dropbox">
          <input type="file" :disabled="isSaving" @change="save($event.target.files[0]);"
            accept="image/*" class="input-file">
            <p v-if="isInitial">
              drag your meme(z) here to begin<br> or click to browse
            </p>
            <p v-if="isSaving">
              uploading meme...
            </p>
        </div>
      </form>
  </div>

  <div>
    <label for="score_comps">choose a score computation:</label>
    <div id="score_comps">
      <label v-for="scoreComp in scoreComps">
        <input
          type="radio"
          :value="scoreComp.ie_hh"
          :checked="selectedScoreCompHash == scoreComp.nsc_eh"
          @change="set_score_comp(scoreComp.nsc_eh)"
        >
        {{scoreComp.name}}
        </br>
      </label>
    </div>
  </div>

  <div>
    <form @submit.prevent="handleScoreCompSubmit">
      <label for="name">name</label>
      <input type="name" id="name" v-model="scoreCompCreateForm.name" required />

      <label for="comp">expression</label>
      <textarea
        id="comp"
        cols="30"
        rows="10"
        v-model="scoreCompCreateForm.comp"
        required
      ></textarea>

      <button type="submit">submit</button>
    </form>
  </div>

  <button v-on:click="get_memez()">refresh feed</button>

  <div class="container">
    <div v-for="score_comp in scoreComps">
        {{ score_comp.expr }}
    </div>
    <div v-for="meme in memez" class="uploaded-meme">
        <img style="max-width: 100%;" v-bind:src="`${meme.meme_string}`">
        Score: {{ meme.opt_score ?? "null" }}
        <button v-on:click="react(meme.eh, 'lulz')">ðŸ˜‚ {{count_reaction(meme.aggregated_reactions, 0)}}</button>
        <button v-on:click="react(meme.eh, 'mbz')">ðŸ¤¯ {{count_reaction(meme.aggregated_reactions, 1)}}</button>
    </div>
  </div>
</section>
</body>

</html>
